<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palette Creator</title>
  <style>
    :root{ --bg:#0b1022; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --accent:#38bdf8 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; place-items:center; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .app{ width:min(900px,94vw); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:18px; box-shadow:0 10px 40px rgba(0,0,0,.5) }
    h1{ margin:0 0 8px 0; font-size:28px }
    .row{ display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer; font-weight:600 }
    .slots{ display:grid; grid-template-columns: repeat(5, 1fr); gap:10px; margin-top:12px }
    .slot{ height:120px; border-radius:12px; border:1px solid rgba(255,255,255,.12); display:grid; place-items:center; position:relative }
    .meta{ background:rgba(0,0,0,.35); padding:6px 10px; border-radius:999px }
    .lock{ position:absolute; top:8px; right:8px; cursor:pointer }
    .history{ display:flex; flex-wrap:wrap; gap:8px; margin-top:12px }
    .chip{ width:36px; height:36px; border-radius:8px; border:1px solid rgba(255,255,255,.12); cursor:pointer }
  </style>
</head>
<body>
  <div class="app">
    <h1>Palette Creator</h1>
    <div class="row">
      <button id="random" class="btn">Random</button>
      <button id="complement" class="btn">Complementary</button>
      <button id="triad" class="btn">Triadic</button>
      <button id="save" class="btn">Save</button>
      <button id="clear" class="btn">Clear</button>
    </div>

    <div id="slots" class="slots"></div>
    <div id="history" class="history"></div>
  </div>

  <script>
    (function(){
      const slotsEl = document.getElementById('slots');
      const historyEl = document.getElementById('history');
      const storageKey = 'palette-creator-v1';
      let history = load();
      const slots = Array.from({length:5}, ()=> ({ color: randHex(), locked:false }));

      function load(){ try{ return JSON.parse(localStorage.getItem(storageKey))||[] }catch(_){ return [] } }
      function save(){ localStorage.setItem(storageKey, JSON.stringify(history)); }
      function randHex(){ return '#'+Math.floor(Math.random()*0xffffff).toString(16).padStart(6,'0'); }
      function hexToHsl(hex){ const r=parseInt(hex.slice(1,3),16)/255, g=parseInt(hex.slice(3,5),16)/255, b=parseInt(hex.slice(5,7),16)/255; const max=Math.max(r,g,b), min=Math.min(r,g,b); let h,s,l=(max+min)/2; if(max===min){ h=s=0; } else { const d=max-min; s=l>0.5?d/(2-max-min):d/(max+min); switch(max){ case r:h=(g-b)/d+(g<b?6:0);break; case g:h=(b-r)/d+2;break; default:h=(r-g)/d+4; } h/=6; } return { h:Math.round(h*360), s:Math.round(s*100), l:Math.round(l*100) }; }
      function hslToHex(h,s,l){ s/=100; l/=100; const k=n=> (n + h/30) % 12; const a=s*Math.min(l,1-l); const f=n=> l - a*Math.max(-1, Math.min(k(n)-3, Math.min(9-k(n),1))); const r=Math.round(255*f(0)), g=Math.round(255*f(8)), b=Math.round(255*f(4)); return '#'+[r,g,b].map(x=>x.toString(16).padStart(2,'0')).join(''); }

      function genRandom(){ for(const s of slots){ if(!s.locked) s.color = randHex(); } render(); }
      function genComplement(){ const base = slots[0].color; const {h,s,l}=hexToHsl(base); const comp=(h+180)%360; const arr=[h,comp,(h+30)%360,(h+210)%360,(h+330)%360]; arr.forEach((hh,i)=>{ if(!slots[i].locked) slots[i].color=hslToHex(hh,s,l); }); render(); }
      function genTriad(){ const base = slots[0].color; const {h,s,l}=hexToHsl(base); const arr=[h,(h+120)%360,(h+240)%360,(h+60)%360,(h+300)%360]; arr.forEach((hh,i)=>{ if(!slots[i].locked) slots[i].color=hslToHex(hh,s,l); }); render(); }

      function copy(text){ navigator.clipboard.writeText(text).catch(()=>{}); }

      function render(){ slotsEl.innerHTML=''; slots.forEach((s,i)=>{ const div=document.createElement('div'); div.className='slot'; div.style.background=s.color; const meta=document.createElement('div'); meta.className='meta'; meta.textContent=s.color.toUpperCase(); meta.addEventListener('click', ()=> copy(s.color)); const lock=document.createElement('div'); lock.className='lock'; lock.textContent = s.locked?'ðŸ”’':'ðŸ”“'; lock.title='Toggle lock'; lock.addEventListener('click', ()=>{ s.locked=!s.locked; render(); }); div.appendChild(meta); div.appendChild(lock); slotsEl.appendChild(div); }); renderHistory(); }

      function renderHistory(){ historyEl.innerHTML=''; for(const p of history){ const chip=document.createElement('div'); chip.className='chip'; chip.style.background=p; chip.title=p; chip.addEventListener('click', ()=>{ slots[0].color=p; render(); }); historyEl.appendChild(chip); }
      }

      document.getElementById('random').addEventListener('click', genRandom);
      document.getElementById('complement').addEventListener('click', genComplement);
      document.getElementById('triad').addEventListener('click', genTriad);
      document.getElementById('save').addEventListener('click', ()=>{ for(const s of slots){ history.unshift(s.color); } history=[...new Set(history)].slice(0,200); save(); renderHistory(); });
      document.getElementById('clear').addEventListener('click', ()=>{ history=[]; save(); renderHistory(); });

      render();
    })();
  </script>
</body>
</html>
