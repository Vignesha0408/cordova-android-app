<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Favorite Colors</title>
  <style>
    :root{ --bg:#0b1022; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; grid-template-rows:auto 1fr; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .toolbar{ display:flex; gap:8px; flex-wrap:wrap; padding:12px; background:rgba(255,255,255,.03); border-bottom:1px solid rgba(255,255,255,.08) }
    .input{ padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text) }
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); gap:12px; padding:12px }
    .card{ border:1px solid rgba(255,255,255,.12); border-radius:12px; overflow:hidden; background:var(--panel) }
    .swatch{ height:80px }
    .meta{ display:flex; justify-content:space-between; align-items:center; padding:10px }
    .muted{ color:var(--muted); font-size:12px }
    .btn{ padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer }
  </style>
</head>


<body>
  <div class="toolbar">
    <input id="picker" type="color" class="input" value="#1e293b" />
    <input id="hex" class="input" placeholder="#1e293b" style="min-width:140px" />
    <input id="tag" class="input" placeholder="Tag (e.g., Brand)" />
    <button id="add" class="input" style="max-width:120px">Add</button>
    <input id="search" class="input" placeholder="Search tag/hex..." style="margin-left:auto; min-width:220px" />
    <button id="clear" class="input" style="max-width:120px">Clear All</button>
  </div>
  <div id="grid" class="grid"></div>

  <script>
    (function(){
      const picker=document.getElementById('picker');
      const hex=document.getElementById('hex');
      const tag=document.getElementById('tag');
      const add=document.getElementById('add');
      const search=document.getElementById('search');
      const clear=document.getElementById('clear');
      const grid=document.getElementById('grid');
      const storageKey='favorite-colors-v1';
      let colors=load();

      function load(){ try{ return JSON.parse(localStorage.getItem(storageKey))||[] }catch(_){ return [] } }
      function save(){ localStorage.setItem(storageKey, JSON.stringify(colors)); }
      function toHex(c){ const ctx=document.createElement('canvas').getContext('2d'); ctx.fillStyle=c; return ctx.fillStyle; }
      function addColor(value, label){ const h=(value||picker.value); colors.unshift({ hex: toHex(h), tag: (label||tag.value).trim(), ts:Date.now() }); colors=[...new Set(colors.map(x=>x.hex+'|'+x.tag))].map(s=>{ const [hx,t]=s.split('|'); return {hex:hx, tag:t, ts:Date.now()}; }); save(); render(); }
      function removeColor(idx){ colors.splice(idx,1); save(); render(); }
      function copy(t){ navigator.clipboard.writeText(t).catch(()=>{}); }

      function render(){ grid.innerHTML=''; const q=search.value.toLowerCase(); const arr=colors.filter(c=> c.hex.toLowerCase().includes(q)||c.tag.toLowerCase().includes(q)); for(const [i,c] of arr.entries()){ const card=document.createElement('div'); card.className='card'; const sw=document.createElement('div'); sw.className='swatch'; sw.style.background=c.hex; card.appendChild(sw); const meta=document.createElement('div'); meta.className='meta'; const left=document.createElement('div'); left.innerHTML = `<div>${c.hex.toUpperCase()}</div><div class="muted">${c.tag||''}</div>`; const right=document.createElement('div'); const copyBtn=document.createElement('button'); copyBtn.className='btn'; copyBtn.textContent='Copy'; copyBtn.addEventListener('click', ()=> copy(c.hex)); const del=document.createElement('button'); del.className='btn'; del.textContent='Remove'; del.addEventListener('click', ()=> removeColor(i)); right.appendChild(copyBtn); right.appendChild(del); meta.appendChild(left); meta.appendChild(right); card.appendChild(meta); grid.appendChild(card); }
      }

      picker.addEventListener('input', ()=>{ hex.value=picker.value; });
      hex.addEventListener('change', ()=>{ picker.value=toHex(hex.value); });
      add.addEventListener('click', ()=> addColor(hex.value, tag.value));
      search.addEventListener('input', render);
      clear.addEventListener('click', ()=>{ if(confirm('Clear all?')){ colors=[]; save(); render(); } });

      hex.value=picker.value; render();
    })();
  </script>
</body>
</html>
