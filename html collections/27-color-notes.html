<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Color Notes</title>
  <style>
    :root{ --bg:#0b1022; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; grid-template-rows:auto 1fr; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .toolbar{ display:flex; gap:8px; flex-wrap:wrap; padding:12px; background:rgba(255,255,255,.03); border-bottom:1px solid rgba(255,255,255,.08) }
    .input{ padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text) }
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:12px; padding:12px }
    .card{ border-radius:12px; padding:12px; min-height:120px; display:grid; gap:8px; border:1px solid rgba(255,255,255,.12) }
    .title{ font-weight:700 }
    .muted{ color:var(--muted); font-size:12px }
    .btn{ padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer }
  </style>
</head>
<body>
  <div class="toolbar">
    <input id="title" class="input" placeholder="Title" />
    <input id="color" type="color" class="input" value="#fde68a" />
    <input id="tags" class="input" placeholder="Tags (comma)" />
    <button id="add" class="input" style="max-width:120px">Add</button>
    <input id="search" class="input" placeholder="Search..." style="margin-left:auto; min-width:220px" />
  </div>
  <div id="grid" class="grid"></div>

  <script>
    (function(){
      const grid=document.getElementById('grid');
      const title=document.getElementById('title');
      const color=document.getElementById('color');
      const tags=document.getElementById('tags');
      const add=document.getElementById('add');
      const search=document.getElementById('search');
      const storageKey='color-notes-v1';
      let notes=load();
      function uid(){ return Date.now().toString(36)+Math.random().toString(36).slice(2,8); }
      function load(){ try{ return JSON.parse(localStorage.getItem(storageKey))||[] }catch(_){ return [] } }
      function save(){ localStorage.setItem(storageKey, JSON.stringify(notes)); }

      function addNote(t, c, tg){ notes.unshift({ id:uid(), title:t.trim()||'Untitled', color:c, tags:tg, content:'', ts:Date.now() }); save(); render(); }
      function remove(id){ notes = notes.filter(n=>n.id!==id); save(); render(); }

      function render(){ const q=search.value.toLowerCase(); const arr=notes.filter(n=> n.title.toLowerCase().includes(q) || n.tags.toLowerCase().includes(q) || n.content.toLowerCase().includes(q)); arr.sort((a,b)=> b.ts-a.ts); grid.innerHTML=''; for(const n of arr){ const card=document.createElement('div'); card.className='card'; card.style.background=n.color; const t=document.createElement('div'); t.className='title'; t.textContent=n.title; const meta=document.createElement('div'); meta.className='muted'; meta.textContent=n.tags; const ta=document.createElement('textarea'); ta.className='input'; ta.style.background='rgba(255,255,255,.15)'; ta.value=n.content; ta.placeholder='Write...'; ta.addEventListener('input', ()=>{ n.content=ta.value; n.ts=Date.now(); save(); }); const row=document.createElement('div'); row.style.display='flex'; row.style.gap='8px'; const del=document.createElement('button'); del.className='btn'; del.textContent='Remove'; del.addEventListener('click', ()=> remove(n.id)); row.appendChild(del); card.appendChild(t); card.appendChild(meta); card.appendChild(ta); card.appendChild(row); grid.appendChild(card); } }

      add.addEventListener('click', ()=>{ if(!title.value.trim() && !tags.value.trim()) return; addNote(title.value, color.value, tags.value); title.value=''; tags.value=''; title.focus(); });
      search.addEventListener('input', render);
      render();
    })();
  </script>
</body>
</html>
