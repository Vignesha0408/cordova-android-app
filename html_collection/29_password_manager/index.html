<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Password Manager (Local)</title>
  <style>
    :root{ --bg:#0b1022; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --ok:#22c55e; --bad:#ef4444 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; grid-template-rows:auto 1fr; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .toolbar{ display:flex; gap:8px; flex-wrap:wrap; padding:12px; background:rgba(255,255,255,.03); border-bottom:1px solid rgba(255,255,255,.08) }
    .input{ padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text) }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer; font-weight:600 }
    .list{ padding:12px; display:grid; gap:10px }
    .row{ display:grid; grid-template-columns: 1.2fr 1fr 1fr auto; gap:8px; align-items:center; padding:10px; border:1px solid rgba(255,255,255,.12); background:var(--panel); border-radius:12px }
    .muted{ color:var(--muted); font-size:12px }
  </style>
</head>
<body>
  <div class="toolbar">
    <input id="site" class="input" placeholder="Site (e.g., example.com)" />
    <input id="user" class="input" placeholder="Username/Email" />
    <input id="pass" class="input" placeholder="Password" />
    <button id="gen" class="btn">Generate</button>
    <button id="add" class="btn">Add</button>
    <input id="search" class="input" placeholder="Search..." style="margin-left:auto; min-width:220px" />
  </div>
  <div id="list" class="list"></div>

  <script>
    (function(){
      const site=document.getElementById('site');
      const user=document.getElementById('user');
      const pass=document.getElementById('pass');
      const gen=document.getElementById('gen');
      const add=document.getElementById('add');
      const search=document.getElementById('search');
      const list=document.getElementById('list');
      const storageKey='passwords-local-v1';
      let entries=load();

      function load(){ try{ return JSON.parse(localStorage.getItem(storageKey))||[] }catch(_){ return [] } }
      function save(){ localStorage.setItem(storageKey, JSON.stringify(entries)); }

      function generate(len=16){ const chars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_-+='; let out=''; crypto.getRandomValues(new Uint32Array(len)).forEach(v=> out += chars[v%chars.length]); return out; }
      function addEntry(s,u,p){ entries.unshift({ id:Date.now().toString(36)+Math.random().toString(36).slice(2,8), site:s.trim(), user:u.trim(), pass:p, ts:Date.now() }); save(); render(); }
      function removeEntry(id){ entries = entries.filter(e=>e.id!==id); save(); render(); }

      function copy(text){ navigator.clipboard.writeText(text).catch(()=>{}); }
      function render(){ const q=search.value.toLowerCase(); const arr=entries.filter(e=> e.site.toLowerCase().includes(q) || e.user.toLowerCase().includes(q)); list.innerHTML=''; for(const e of arr){ const row=document.createElement('div'); row.className='row'; const s=document.createElement('div'); s.textContent=e.site; const u=document.createElement('div'); u.textContent=e.user; const p=document.createElement('div'); p.textContent='•'.repeat(12); const actions=document.createElement('div'); const show=document.createElement('button'); show.className='btn'; show.textContent='Show'; let shown=false; show.addEventListener('click', ()=>{ shown=!shown; p.textContent=shown?e.pass:'•'.repeat(12); show.textContent=shown?'Hide':'Show'; }); const copyBtn=document.createElement('button'); copyBtn.className='btn'; copyBtn.textContent='Copy'; copyBtn.addEventListener('click', ()=> copy(e.pass)); const del=document.createElement('button'); del.className='btn'; del.textContent='Remove'; del.addEventListener('click', ()=> removeEntry(e.id)); actions.appendChild(show); actions.appendChild(copyBtn); actions.appendChild(del); row.appendChild(s); row.appendChild(u); row.appendChild(p); row.appendChild(actions); list.appendChild(row); } }

      gen.addEventListener('click', ()=>{ pass.value = generate(16); });
      add.addEventListener('click', ()=>{ if(!site.value.trim()||!user.value.trim()||!pass.value.trim()) return; addEntry(site.value,user.value,pass.value); site.value=''; user.value=''; pass.value=''; site.focus(); });
      search.addEventListener('input', render);
      render();
    })();
  </script>
</body>
</html>
