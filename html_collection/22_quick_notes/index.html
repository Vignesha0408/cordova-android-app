<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quick Notes</title>
  <style>
    :root{ --bg:#0b1022; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --accent:#38bdf8 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; grid-template-rows:auto 1fr; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .toolbar{ display:flex; gap:8px; flex-wrap:wrap; padding:12px; background:rgba(255,255,255,.03); border-bottom:1px solid rgba(255,255,255,.08) }
    .input{ padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text) }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer; font-weight:600 }
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(240px,1fr)); gap:12px; padding:12px }
    .note{ background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px; display:grid; gap:6px }
    .title{ font-weight:700 }
    .muted{ color:var(--muted); font-size:12px }
    .pin{ cursor:pointer; color:#fde68a }
    textarea{ width:100%; min-height:100px; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.02); color:var(--text) }
  </style>
</head>
<body>
  <div class="toolbar">
    <input id="title" class="input" placeholder="Title" />
    <input id="tags" class="input" placeholder="Tags (comma)" />
    <button id="add" class="btn">Add</button>
    <input id="search" class="input" placeholder="Search..." style="margin-left:auto; min-width:220px" />
    <button id="exportBtn" class="btn">Export</button>
    <input id="importFile" type="file" accept="application/json" hidden />
    <button id="importBtn" class="btn">Import</button>
  </div>
  <div class="grid" id="grid"></div>

  <script>
    (function(){
      const title = document.getElementById('title');
      const tags = document.getElementById('tags');
      const add = document.getElementById('add');
      const grid = document.getElementById('grid');
      const search = document.getElementById('search');
      const exportBtn = document.getElementById('exportBtn');
      const importBtn = document.getElementById('importBtn');
      const importFile = document.getElementById('importFile');

      const storageKey = 'quick-notes-v1';
      let notes = load();
      function uid(){ return Date.now().toString(36)+Math.random().toString(36).slice(2,8); }
      function load(){ try{ return JSON.parse(localStorage.getItem(storageKey))||[] }catch(_){ return [] } }
      function save(){ localStorage.setItem(storageKey, JSON.stringify(notes)); }

      function addNote(t, ta){ notes.unshift({ id:uid(), title:t.trim()||'Untitled', tags:ta, content:'', pin:false, ts:Date.now() }); save(); render(); }
      function remove(id){ notes = notes.filter(n=>n.id!==id); save(); render(); }
      function togglePin(id){ const n=notes.find(x=>x.id===id); if(n){ n.pin=!n.pin; save(); render(); } }

      function render(){
        const q = search.value.toLowerCase();
        const arr = notes.filter(n=> n.title.toLowerCase().includes(q) || n.tags.toLowerCase().includes(q) || n.content.toLowerCase().includes(q));
        arr.sort((a,b)=> Number(b.pin)-Number(a.pin) || b.ts-a.ts);
        grid.innerHTML='';
        for(const n of arr){
          const card=document.createElement('div'); card.className='note';
          const head=document.createElement('div'); head.style.display='flex'; head.style.justifyContent='space-between'; head.style.alignItems='center';
          const t=document.createElement('div'); t.className='title'; t.textContent=n.title; head.appendChild(t);
          const pin=document.createElement('div'); pin.className='pin'; pin.textContent = n.pin?'📌':'📍'; pin.title='Pin'; pin.addEventListener('click', ()=> togglePin(n.id)); head.appendChild(pin);
          const meta=document.createElement('div'); meta.className='muted'; meta.textContent = n.tags;
          const ta=document.createElement('textarea'); ta.value=n.content; ta.placeholder='Write notes...'; ta.addEventListener('input', ()=>{ n.content=ta.value; n.ts=Date.now(); save(); });
          const row=document.createElement('div'); row.style.display='flex'; row.style.gap='8px';
          const del=document.createElement('button'); del.className='btn'; del.textContent='Remove'; del.addEventListener('click', ()=> remove(n.id));
          row.appendChild(del);
          card.appendChild(head); card.appendChild(meta); card.appendChild(ta); card.appendChild(row);
          grid.appendChild(card);
        }
      }

      add.addEventListener('click', ()=>{ if(!title.value.trim() && !tags.value.trim()) return; addNote(title.value, tags.value); title.value=''; tags.value=''; title.focus(); });
      search.addEventListener('input', render);

      exportBtn.addEventListener('click', ()=>{ const a=document.createElement('a'); a.download='notes.json'; a.href='data:application/json,'+encodeURIComponent(JSON.stringify(notes)); a.click(); });
      importBtn.addEventListener('click', ()=> importFile.click());
      importFile.addEventListener('change', async ()=>{ const f=importFile.files[0]; if(!f) return; const txt=await f.text(); try{ const data=JSON.parse(txt); if(Array.isArray(data)){ notes=data; save(); render(); } }catch(_){ alert('Invalid file'); } });

      render();
    })();
  </script>
</body>
</html>
