<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OS & TOC MCQ Quiz (50 Questions)</title>
  <style>
    :root{ --bg:#0b1022; --panel:#111827; --text:#e5e7eb; --muted:#9ca3af; --accent:#38bdf8; --ok:#22c55e; --bad:#ef4444 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; place-items:center; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .app{ width:min(980px,95vw); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:18px; box-shadow:0 10px 40px rgba(0,0,0,.5) }
    h1{ margin:0 0 10px 0; font-size:26px }
    .muted{ color:var(--muted) }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer; font-weight:600 }
    .btn.primary{ background:linear-gradient(180deg,#38bdf8,#0284c7); border-color:rgba(56,189,248,.5) }
    .btn.ok{ background:linear-gradient(180deg,#22c55e,#16a34a); border-color:rgba(34,197,94,.5) }
    .btn.bad{ background:linear-gradient(180deg,#ef4444,#b91c1c); border-color:rgba(239,68,68,.5) }
    .panel{ background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:14px }
    .q{ font-weight:700; margin-bottom:8px }
    .options{ display:grid; gap:8px }
    .opt{ padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); cursor:pointer }
    .opt.selected{ outline:2px solid var(--accent) }
    .opt.correct{ background:rgba(34,197,94,.15); border-color:rgba(34,197,94,.5) }
    .opt.wrong{ background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.5) }
    .footer{ display:flex; justify-content:space-between; align-items:center; margin-top:10px; color:var(--muted) }
    .review{ margin-top:14px }
    .hide{ display:none }
  </style>
</head>
<body>
  <div class="app">
    <h1>OS & TOC MCQ Quiz</h1>
    <div class="muted">50 questions • Random order • Review answers</div>
    <div class="row" style="margin:10px 0">
      <button id="startBtn" class="btn primary">Start Quiz</button>
      <button id="restartBtn" class="btn" disabled>Restart</button>
    </div>

    <div id="quiz" class="panel hide">
      <div id="counter" class="muted">1 / 50</div>
      <div id="question" class="q">Question text</div>
      <div id="options" class="options"></div>
      <div class="footer">
        <div></div>
        <div>
          <button id="nextBtn" class="btn" disabled>Next Question</button>
        </div>
      </div>
    </div>

    <div id="result" class="panel hide"></div>
    <div id="review" class="panel review hide"></div>
  </div>

  <script>
    (function(){
      const startBtn = document.getElementById('startBtn');
      const restartBtn = document.getElementById('restartBtn');
      const quizEl = document.getElementById('quiz');
      const counterEl = document.getElementById('counter');
      const questionEl = document.getElementById('question');
      const optionsEl = document.getElementById('options');
      const resultEl = document.getElementById('result');
      const reviewEl = document.getElementById('review');
      const nextBtn = document.getElementById('nextBtn');

      const storageKey = 'os-toc-quiz-v1';

      const questions = shuffle([
        // 50 OS/TOC MCQs: text, options A-D, correct index (0..3)
        q('Which scheduling algorithm can suffer from starvation?',['FCFS','SJF','Round Robin','Priority (without aging)'],3),
        q('In Round Robin with quantum too small, overhead is',['Low','Moderate','High','Zero'],2),
        q('A process in blocked state is',['Ready to run','Using CPU','Waiting for I/O','Terminated'],2),
        q('Thrashing is primarily due to',['Low CPU speed','Insufficient registers','Insufficient memory','OS bug'],2),
        q('Page table stores',['Virtual-to-physical mappings','File metadata','Process IDs','I/O device list'],0),
        q('Belady’s anomaly is observed in',['LRU','FIFO','OPT','Clock'],1),
        q('Semaphore wait operation is also called',['Signal','P','V','Notify'],1),
        q('Producer-Consumer needs',['Mutex only','Semaphore only','Mutex + Semaphores','No sync'],2),
        q('Banker’s algorithm avoids',['Deadlock','Starvation','Aging','Thrashing'],0),
        q('Deadlock necessary condition not required is',['Mutual exclusion','Hold and wait','No preemption','Aging'],3),
        q('Working set defines',['Recently used pages','All pages of process','Cache lines','Open files'],0),
        q('TLB is used to',['Store pages','Map logical to physical fast','DMA transfer','Swap files'],1),
        q('Context switch saves',['Only PC','All CPU state','Only stack','Only registers'],1),
        q('Interrupts are handled by',['User program','Scheduler','Interrupt handler/ISR','DMA'],2),
        q('Disk scheduling to minimize seek time is',['FCFS','SSTF','FIFO','RR'],1),
        q('Internal fragmentation occurs in',['Paging','Segmentation','Fixed partitions','Linked alloc'],2),
        q('External fragmentation occurs in',['Paging','Segmentation','Fixed partitions','Slab alloc'],1),
        q('Copy-on-write used by',['fork()','exec()','wait()','exit()'],0),
        q('DMA stands for',['Direct Memory Access','Disk Memory Access','Dynamic Memory Alloc','Direct Module Access'],0),
        q('UNIX treats everything as',['File','Process','Thread','Page'],0),
        // TOC
        q('Regular languages are closed under',['Union, Concatenation, Kleene star','Complement only','Intersection only','None'],0),
        q('DFA with n states has at most distinct Myhill-Nerode classes',['n','n^2','2^n','log n'],0),
        q('Pumping lemma applies to',['Regular','Context-free only','Both','Neither'],0),
        q('Every CFL is accepted by',['PDA','DFA','TM with 2 tapes','Moore machine'],0),
        q('Chomsky normal form productions are',['A->BC or A->a','A->aB','A->ε always','S->aS'],0),
        q('LR parsers are',['Top-down','Bottom-up','Recursive descent','LL(1)'],1),
        q('Undecidable problem is',['HALT','Primality','Connectivity','Sorting'],0),
        q('A language is Turing-recognizable if',['TM accepts strings in it','DFA accepts it','PDA accepts it','Regex generates it'],0),
        q('Context-free languages are not closed under',['Union','Concatenation','Intersection','Kleene star'],2),
        q('Ambiguous grammar has',['Two leftmost derivations','Single parse','No parse','Only rightmost derivation'],0),
        q('NFA to DFA may cause',['State reduction','State explosion','No change','Infeasible'],1),
        q('Minimum DFA is unique up to',['State names','Transitions','Alphabet','None'],0),
        q('CFG can be parsed by',['DFA','PDA','TM only','Regex'],1),
        q('LL(1) tables need',['FIRST/FOLLOW','Infix to postfix','Dijkstra','SAT solver'],0),
        q('CYK parses in',['O(n)','O(n^2)','O(n^3)','O(2^n)'],2),
        q('Rice’s theorem concerns',['Properties of TM languages','Regular languages','PDA properties','CFG ambiguity'],0),
        q('A TM that never halts on some input is',['Partial function','Total function','Regular','CFL'],0),
        q('Closure of regular under complement uses',['DFA final-state swap','PDA stack','TM oracle','CFG removal'],0),
        q('Minimal cover of CFG refers to',['No useless symbols','No ε and unit rules','Left factoring','All of these'],1),
        q('Left recursion must be removed for',['LL parsers','LR parsers','CYK','Earley'],0),
        // More OS
        q('Monitors encapsulate',['Shared data + procedures','Only procedures','Only data','Only semaphores'],0),
        q('Starvation cured by',['Aging','Killing processes','More RAM','Longer quantum'],0),
        q('Copying a page from disk to memory is',['Swapping','Paging in','Thrashing','Scheduling'],1),
        q('Victim page for replacement chosen by',['Scheduler','Pager','Loader','Linker'],1),
        q('Memory mapped files allow',['File I/O via address space','Faster CPU','GPU access','DMA only'],0),
        q('Round Robin is',['Preemptive','Non-preemptive','Not a scheduler','Only for batch'],0),
        q('Critical section problem avoids',['Mutual exclusion','Progress and bounded wait violations','Deadlock always','Interrupts'],1),
        q('Peterson’s algorithm works for',['2 processes','Any number','1 process','Odd only'],0),
        q('Spinlock wastes',['CPU cycles','Memory','Disk','Network'],0),
        q('Buddy allocator splits',['Power-of-two blocks','Equal halves always','Pages only','Segments only'],0),
        q('Journaling file system helps with',['Crash recovery','Compression','Encryption','Defrag'],0),
        q('Ext2 vs Ext3 key diff',['Journaling','Block size','Permissions','Paths'],0),
        q('Scheduling for interactive is usually',['SJF','RR','SRTF','FCFS'],1),
        q('Dirty page means',['Modified in memory','Unused','On disk','Shared'],0),
        q('Kernel mode allows',['Privileged instructions','User UIs','More RAM','Network only'],0),
        q('Syscall interface is',['Trap/interrupt mechanism','Library function only','DMA path','IRQ mask'],0),
        q('Zombie process is',['Terminated, not reaped','Running','Sleeping','Blocked on I/O'],0)
      ]);

      const TOTAL = 50;
      let usedQuestions = new Set();
      let currentQuestion = null;
      let questionCount = 0;

      function q(text, opts, correct){ return { text, opts, correct }; }
      function shuffle(a){ const r=[...a]; for(let i=r.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [r[i],r[j]]=[r[j],r[i]] } return r }

      function start(){
        usedQuestions.clear();
        questionCount = 0;
        quizEl.classList.remove('hide'); resultEl.classList.add('hide'); reviewEl.classList.add('hide');
        restartBtn.disabled = false;
        getRandomQuestion();
      }

      function getRandomQuestion(){
        if(usedQuestions.size >= questions.length) {
          // All questions used, reset
          usedQuestions.clear();
        }
        
        let randomIndex;
        do {
          randomIndex = Math.floor(Math.random() * questions.length);
        } while(usedQuestions.has(randomIndex));
        
        usedQuestions.add(randomIndex);
        currentQuestion = questions[randomIndex];
        questionCount++;
        render();
      }

      function render(){
        if(!currentQuestion) return;
        
        counterEl.textContent = `Question ${questionCount}`;
        questionEl.textContent = currentQuestion.text;
        optionsEl.innerHTML = '';
        
        currentQuestion.opts.forEach((opt,i)=>{
          const div = document.createElement('div');
          div.className = 'opt';
          div.textContent = opt;
          div.addEventListener('click', ()=>{ selectOption(i); });
          optionsEl.appendChild(div);
        });
      }

      function selectOption(selectedIndex){
        // Disable all options
        const optionDivs = optionsEl.querySelectorAll('.opt');
        optionDivs.forEach((div, i) => {
          div.style.pointerEvents = 'none';
          if(i === currentQuestion.correct) {
            div.classList.add('correct');
          }
          if(i === selectedIndex && i !== currentQuestion.correct) {
            div.classList.add('wrong');
          }
        });
        
        // Enable next button
        nextBtn.disabled = false;
      }

      function next(){
        nextBtn.disabled = true;
        getRandomQuestion();
      }

      startBtn.addEventListener('click', start);
      restartBtn.addEventListener('click', start);
      nextBtn.addEventListener('click', next);
    })();
  </script>
</body>
</html>
