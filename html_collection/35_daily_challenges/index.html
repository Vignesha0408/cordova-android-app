<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Challenges</title>
  <style>
    :root{ --bg:#0b1022; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --ok:#22c55e; --accent:#38bdf8 }
    *{ box-sizing:border-box }
    body{ margin:0; min-height:100vh; display:grid; place-items:center; background:radial-gradient(900px 600px at 15% 0%, #111827, #0b1022 60%, #050814); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial }
    .app{ width:min(820px,94vw); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:18px; box-shadow:0 10px 40px rgba(0,0,0,.5) }
    h1{ margin:0 0 8px 0; font-size:28px }
    .panel{ background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:16px; margin-top:10px }
    .row{ display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer; font-weight:600 }
    .muted{ color:var(--muted) }
    .tasks{ display:grid; gap:8px; margin-top:10px }
    .task{ display:flex; align-items:center; gap:8px; padding:8px; border-radius:10px; border:1px solid rgba(255,255,255,.12) }
    .streak{ color:var(--ok); font-weight:700 }
  </style>
</head>
<body>
  <div class="app">
    <h1>Daily Challenges</h1>

    <div class="panel">
      <div class="row">
        <button id="generate" class="btn">Generate Today</button>
        <button id="addCustom" class="btn">Add Custom</button>
        <button id="clearDone" class="btn">Clear Done</button>
        <div class="muted" id="date"></div>
      </div>
      <div class="muted">Streak: <span id="streak" class="streak">0</span> days</div>
      <div id="tasks" class="tasks"></div>
    </div>
  </div>

  <script>
    (function(){
      const POOL = [
        'Drink 8 glasses of water', 'Walk 6,000 steps', 'Meditate 10 minutes', 'Read 15 pages', 'Write 200 words', 'No sugar today', 'Learn 1 new concept', 'Review notes 20 minutes', 'Declutter 5 items', 'Stretch 10 minutes'
      ];
      const tasksEl=document.getElementById('tasks');
      const generate=document.getElementById('generate');
      const addCustom=document.getElementById('addCustom');
      const clearDone=document.getElementById('clearDone');
      const streakEl=document.getElementById('streak');
      const dateEl=document.getElementById('date');
      const storageKey='daily-challenges-v1';

      function today(){ const d=new Date(); return d.toISOString().slice(0,10); }
      function load(){ try{ return JSON.parse(localStorage.getItem(storageKey))||{ days:{}, lastDay:'', streak:0 } }catch(_){ return { days:{}, lastDay:'', streak:0 } } }
      function save(){ localStorage.setItem(storageKey, JSON.stringify(state)); }

      let state=load();
      if(!state.days[today()]) state.days[today()]={ tasks:[], done:false };

      function shuffle(a){ const r=[...a]; for(let i=r.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [r[i],r[j]]=[r[j],r[i]] } return r }

      function ensureStreak(){ const last=state.lastDay; const t=today(); if(last===t) return; if(last){ const prev=new Date(last); const cur=new Date(t); const diff=(cur - prev)/(24*3600*1000); if(diff===1) state.streak++; else state.streak=1; } else { state.streak=1; } state.lastDay=t; }

      function generateToday(){ const t=today(); if(state.days[t].tasks.length===0){ const picks = shuffle(POOL).slice(0,5).map(x=> ({ id:uid(), text:x, done:false })); state.days[t].tasks = picks; save(); render(); } }
      function uid(){ return Date.now().toString(36)+Math.random().toString(36).slice(2,8); }
      function addTask(text){ const t=today(); state.days[t].tasks.unshift({ id:uid(), text:text.trim(), done:false }); save(); render(); }
      function toggle(id){ const t=today(); const item=state.days[t].tasks.find(x=>x.id===id); if(item){ item.done=!item.done; save(); render(); }
        const allDone = state.days[t].tasks.length>0 && state.days[t].tasks.every(x=>x.done);
        state.days[t].done = allDone; if(allDone){ ensureStreak(); save(); render(); }
      }
      function remove(id){ const t=today(); state.days[t].tasks=state.days[t].tasks.filter(x=>x.id!==id); save(); render(); }

      function render(){ const t=today(); dateEl.textContent = `Today: ${t}`; streakEl.textContent = state.streak; tasksEl.innerHTML=''; for(const it of state.days[t].tasks){ const row=document.createElement('div'); row.className='task'; const cb=document.createElement('input'); cb.type='checkbox'; cb.checked=it.done; cb.addEventListener('change', ()=> toggle(it.id)); const span=document.createElement('div'); span.textContent=it.text; span.style.flex='1'; if(it.done){ span.style.textDecoration='line-through'; span.classList.add('muted'); } const rm=document.createElement('button'); rm.className='btn'; rm.textContent='Remove'; rm.addEventListener('click', ()=> remove(it.id)); row.appendChild(cb); row.appendChild(span); row.appendChild(rm); tasksEl.appendChild(row); } }

      generate.addEventListener('click', generateToday);
      addCustom.addEventListener('click', ()=>{ const text=prompt('Custom challenge'); if(text && text.trim()) addTask(text); });
      clearDone.addEventListener('click', ()=>{ const t=today(); state.days[t].tasks=state.days[t].tasks.filter(x=>!x.done); save(); render(); });

      render();
    })();
  </script>
</body>
</html>
